<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">

   
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    @*<link href="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/css/bootstrap.min.css" rel="stylesheet">*@
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.4.1/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="~/assets/css/profilestyle.css">
</head>
<body>
    <div class="container">
        <div class="profile-page tx-13">
            <div class="row">
                    <div class="col-12 grid-margin">
                        <div class="profile-header">
                            <div class="cover">
                                <div class="gray-shade"></div>
                                <figure>
                                    <img src="https://bootdey.com/img/Content/bg1.jpg" class="img-fluid" alt="profile cover" style="height:200px">
                                </figure>
                                <div class="cover-body d-flex justify-content-between align-items-center">
                                    <div>
                                        <img class="profile-pic" src="~/upload/@ViewBag.User.ImageProfile" alt="profile" width="50px" height="50px">
                                        <span class="profile-name">@ViewBag.User.Email</span>
                                    </div>
                                    <div class="d-none d-md-block">
                                        <button class="btn btn-primary btn-icon-text btn-edit-profile">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit btn-icon-prepend">
                                                <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path>
                                                <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path>
                                            </svg> Edytuj profil
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <div class="header-links">
                                <ul class="links d-flex align-items-center mt-3 mt-md-0">
                                    <li class="header-link-item d-flex align-items-center active" >
                                        <svg  xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-columns mr-1 icon-md">
                                            <path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"></path>
                                        </svg>
                                        <a class="pt-1px d-none d-md-block" href="@Url.ActionLink("Index")">Posty</a>
                                    </li>
                                    <li class="header-link-item ml-3 pl-3 border-left d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-user mr-1 icon-md">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                        <a class="pt-1px d-none d-md-block" href="#">O Mnie </a>
                                    </li>
                                    <li id="FriendsArea" class="header-link-item ml-3 pl-3 border-left d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-users mr-1 icon-md">
                                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="9" cy="7" r="4"></circle>
                                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
                                            <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
                                        </svg>
                                        <a  class="pt-1px d-none d-md-block">Znajomi <span class="text-muted tx-12">3,765</span></a>
                                    </li>
                                    <li class="header-link-item ml-3 pl-3 border-left d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-image mr-1 icon-md">
                                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                                            <polyline points="21 15 16 10 5 21"></polyline>
                                        </svg>
                                        <a class="pt-1px d-none d-md-block" href="#">Zdjęcia </a>
                                    </li>
                                    <li class="header-link-item ml-3 pl-3 border-left d-flex align-items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-video mr-1 icon-md">
                                            <polygon points="23 7 16 12 23 17 23 7"></polygon>
                                            <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                                        </svg>
                                        <a class="pt-1px d-none d-md-block" href="#">Filmy </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            <div class="row profile-body">
                <!-- left wrapper start -->
                <div class="d-none d-md-block col-md-4 col-xl-3 left-wrapper">
                    <div class="card rounded">
                        <div class="card-body">
                            <div class="d-flex align-items-center justify-content-between mb-2">
                                <label class="tx-11 font-weight-bold mb-0 text-uppercase">O Mnie</label>
                                <div class="dropdown">
                                    <button class="btn p-0" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-more-horizontal icon-lg text-muted pb-3px">
                                            <circle cx="12" cy="12" r="1"></circle>
                                            <circle cx="19" cy="12" r="1"></circle>
                                            <circle cx="5" cy="12" r="1"></circle>
                                        </svg>
                                    </button>
                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                        <a class="dropdown-item d-flex align-items-center" href="#">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2 icon-sm mr-2">
                                                <path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path>
                                            </svg> <span class="">Edit</span>
                                        </a>
                                        <a class="dropdown-item d-flex align-items-center" href="#">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-branch icon-sm mr-2">
                                                <line x1="6" y1="3" x2="6" y2="15"></line>
                                                <circle cx="18" cy="6" r="3"></circle>
                                                <circle cx="6" cy="18" r="3"></circle>
                                                <path d="M18 9a9 9 0 0 1-9 9"></path>
                                            </svg> <span class="">Update</span>
                                        </a>
                                        <a class="dropdown-item d-flex align-items-center" href="#">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-eye icon-sm mr-2">
                                                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                                                <circle cx="12" cy="12" r="3"></circle>
                                            </svg> <span class="">View all</span>
                                        </a>
                                    </div>
                                </div>
                            </div>
                            <p>Krótki tekst o mnie.</p>
                            <div class="mt-3">
                                <label class="tx-11 font-weight-bold mb-0 text-uppercase">Rejestracja:</label>
                                <p class="text-muted">Grudzień 15, 2021</p>
                            </div>
                            <div class="mt-3">
                                <label class="tx-11 font-weight-bold mb-0 text-uppercase">Skąd:</label>
                                <p class="text-muted">Radom, Polska</p>
                            </div>
                            <div class="mt-3">
                                <label class="tx-11 font-weight-bold mb-0 text-uppercase">Email:</label>
                                <p class="text-muted">@ViewBag.User.Email</p>
                            </div>
                            <div class="mt-3">
                                <label class="tx-11 font-weight-bold mb-0 text-uppercase">WWW:</label>
                                <p class="text-muted">www.github.com</p>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- left wrapper end -->
                <!-- middle wrapper start -->
                <div class="col-md-8 col-xl-6 middle-wrapper">
                    <div class="row">
                        <div id="postArea">


                            @{int indexBtn = 0;
                                int indexCom = 100;}
                            @foreach (var post in ViewBag.Posts)
                            {

                                indexBtn++;
                                indexCom++;



                                <!--- \\\\\\\Post-->
                                <div id="post" class="card gedf-card" @*style="margin-bottom:5px; margin-top:5px;"*@>
                                    <div class="card-header">
                                        <div class="d-flex justify-content-between align-items-center">
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="mr-2">
                                                    <img class="rounded-circle" width="50" height="50" src="~/upload/@post.AuthorImage" alt="">
                                                </div>
                                                <div class="ml-2">
                                                    <div class="h5 m-0">@post.Author</div>
                                                    <div class="h7 text-muted">@post.Date</div>
                                                </div>
                                            </div>
                                            <div>
                                                <div class="dropdown">
                                                    <button class="btn btn-link dropdown-toggle" type="button" id="gedf-drop1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                                        <i class="fa fa-ellipsis-h"></i>
                                                    </button>
                                                    <div class="dropdown-menu dropdown-menu-right" aria-labelledby="gedf-drop1">
                                                        <div class="h6 dropdown-header">Configuration</div>
                                                        <a class="dropdown-item" href="#">Save</a>
                                                        <a class="dropdown-item" href="#">Hide</a>
                                                        <a class="dropdown-item" href="#">Report</a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div>
                                    <div class="card-body">
                                        <div class="text-muted h7 mb-2"> <i class="fa fa-clock-o"></i>10 min temu</div>
                                        <a class="card-link" href="#">
                                            <h5 class="card-title">@post.Name</h5>
                                        </a>
                                        <div class="col-sm-6 col-md-4 col-lg-3 item">
                                            @if (post.PostImage != null)
                                            {
                                                <a href="~/upload/@post.PostImage" data-lightbox="@post.PostImage"><img class="img-fluid" src="~/upload/@post.PostImage"></a>
                                            }
                                        </div>
                                        <p class="card-text">
                                            @post.Text

                                        </p>
                                    </div>
                                    <div class="card-footer">
                                        @*@Html.ActionLink("Edytuj", "EditPost", new { id = item.Id }) |
                                            @Html.ActionLink("ViewPost", "ViewPost", new { id = item.Id }) |
                                            @Html.ActionLink("Delete", "Delete", new { id = item.Id })*@

                                        @*@Html.ActionLink("Dodaj Komentarz", "AddComment", new { postId = post.Id })*@

                                        @*<a href="#" class="card-link"><i class="fa fa-gittip"></i> Like</a>*@
                                        <button id="@indexBtn" value="@post.Id" class="btn3 btn btn-success" style="margin-left:4px">Komentarze</button>
                                        @*<a href="#" class="card-link"><i class="fa fa-mail-forward"></i> Share</a>*@
                                    </div>
                                </div>

                                //Komentarze
                                <div class="card gedf-card" @*style="padding-top:5px"*@>
                                    <div id="@indexCom" style="display: none" class="be-comment-block">
                                        @*<h5>Komentarze</h5>
                                                 @foreach (var com in ViewBag.Comments)
                                                 {
                                                     @if (com.PostId == post.Id)
                                                     {

                                                         <div class="be-comment">
                                                             <div class="be-img-comment">
                                                                 <a href="blog-detail-2.html">
                                                                     <img src="~/upload/@com.ProfileImage" alt="" class="be-ava-comment">
                                                                 </a>
                                                             </div>
                                                             <div class="be-comment-content">

                                                                 <span class="be-comment-name">
                                                                     <a href="blog-detail-2.html">@com.Author</a>
                                                                 </span>
                                                                 <span class="be-comment-time">
                                                                     <i class="fa fa-clock-o"></i>
                                                                     @com.Date
                                                                 </span>

                                                                 <p class="be-comment-text">
                                                                     @com.Text
                                                                 </p>
                                                             </div>
                                                         </div>
                                                     }
                                                 }

                                                 <div>
                                                     @await Html.PartialAsync("_AddCommentPartial", new PortalMonti.Application.ViewModels.Comment.NewCommentVm()
                                            { PostId = post.Id })
                                                 </div>*@
                                    </div>
                                </div>

                                <!-- Post /////-->
                            }
                        </div>
                        
                    </div>
                </div>
                <!-- middle wrapper end -->
                <!-- right wrapper start -->
                <div class="d-none d-xl-block col-xl-3 right-wrapper">
                    <div class="row">
                        <div class="col-md-12 grid-margin">
                            <div class="card rounded">
                                <div class="card-body">
                                    <h6 class="card-title" style="margin-bottom:15px">Ostatnie zdjęcia</h6>
                                    <div class="latest-photos">
                                        <div class="row">
                                          
                                                @foreach (var item in ViewBag.Images)
                                                {
                                            <div class="col-md-4">
                                                <figure>
                                                    <img class="img-fluid" src="~/upload/@item.Path" alt="">
                                                </figure>
                                            </div>
                                                }
                                            
                                            
                                            
                                           
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                       
                    </div>
                </div>
                <!-- right wrapper end -->
            </div>
        </div>
    </div>

    <script>





        $(function () {
            console.log("strona gotowa");
        });
        $(document).ready(function () {
            $("#btn2").click(function () {
                $("#addpost").toggle(1500);
            });
        });


        $(document).ready(function () {
            $("#FriendsArea").click(function () {

                $("#postArea").load("@Url.Action("ShowFriends", "Profile")"); //szybsze podmienianie danego div po id z zaladowaniem danych z controllera(wrzucanie znajomych)

            });
        });



        $(document).ready(function () {

            for (let i = 0; i <=@ViewBag.Count; i++) {
                $("#"+i).click(function () {
                    event.preventDefault();
                    console.log("przycisk zostal klikniety");

                $.ajax({
                    type: "GET",
                    url: "@Url.Action("ShowComments","Post")",
                    data: { postId: $("#"+i).val() },
                    dataType:"text",
                    success: function (data) {
                        if (i<10) {
                            $("#10" + i).toggle(1000); //zwijanie i rozwijanie, mozna dodac efekty
                            $("#10" + i).html(data); //wrzucenie w danego diva pobranych danych
                        } else {
                            $("#1" + i).toggle(1000); //zwijanie i rozwijanie, mozna dodac efekty
                            $("#1" + i).html(data); //wrzucenie w danego diva pobranych danych

                        }


                $("#create").click(function () {
                    event.preventDefault();
                    console.log("kliknieto");
                $.ajax({
                    type: "POST",
                       url: "@Url.Action("AddCommentNew","Post")",
                       data: { postId: $("#" + i).val(), text: $("#text").val() },
                    dataType:"text",
                    success: function (data) {
                        event.preventDefault();

                $.ajax({
                    type: "GET",
                    url: "@Url.Action("ShowComments","Post")",
                    data: { postId: $("#" + i).val() },
                    dataType: "text",
                    success: function (data) {

                        console.log("kliknieto create");
                        if (i < 10) {
                           // $("#10" + i).show(1000); //zwijanie i rozwijanie, mozna dodac efekty
                            $("#10" + i).html(data); //wrzucenie w danego diva pobranych danych
                        } else {
                           // $("#1" + i).show(1000); //zwijanie i rozwijanie, mozna dodac efekty
                            $("#1" + i).html(data); //wrzucenie w danego diva pobranych danych

                        }
                        event.preventDefault();
                    }
                })

                       }

                       });
                });

                    }

                });
                    });

            }

        });
    </script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


    <style type="text/css">

    </style>

    <script type="text/javascript">

    </script>
</body>
</html>